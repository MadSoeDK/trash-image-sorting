schema: '2.0'
stages:
  preprocess_data:
    cmd: python -m trashsorting.data data --fraction 1.0 --seed 42
    deps:
    - path: data/raw
      hash: md5
      files:
      - relpath: 
          data_raw_garythung___trashnet_default_0.0.0_94cd17ebfd6702bf62281d3c89f22ff649815b46.lock
        md5: d41d8cd98f00b204e9800998ecf8427e
      - relpath: 
          garythung___trashnet/default/0.0.0/94cd17ebfd6702bf62281d3c89f22ff649815b46.incomplete_info.lock
        md5: d41d8cd98f00b204e9800998ecf8427e
      - relpath: 
          garythung___trashnet/default/0.0.0/94cd17ebfd6702bf62281d3c89f22ff649815b46/cache-618b7bf173425671.arrow
        md5: d740c7fb7c0f3c63af47e4d5e05eb598
      - relpath: 
          garythung___trashnet/default/0.0.0/94cd17ebfd6702bf62281d3c89f22ff649815b46/cache-a6ae5f979a9a6062.arrow
        md5: aca3dec7e3e70efaf34d19a7e8ff28cf
      - relpath: 
          garythung___trashnet/default/0.0.0/94cd17ebfd6702bf62281d3c89f22ff649815b46/dataset_info.json
        md5: f7b8a26b17d119bfb39af0c136a185c3
      - relpath: 
          garythung___trashnet/default/0.0.0/94cd17ebfd6702bf62281d3c89f22ff649815b46/trashnet-train.arrow
        md5: 31a07a497f29f39a42e5be6d595f24a4
      - relpath: 
          garythung___trashnet/default/0.0.0/94cd17ebfd6702bf62281d3c89f22ff649815b46_builder.lock
        md5: d41d8cd98f00b204e9800998ecf8427e
    - path: src/trashsorting/data.py
      hash: md5
      md5: b972229927449c46db9f467407d5f385
      size: 17776
    params:
      params.yaml:
        data.fraction: 1.0
        data.seed: 42
    outs:
    - path: data/processed/trashnet.pt
      hash: md5
      md5: 8efe31e3a4096804e2b49fb0b445d549
      size: 3043116382
      cloud:
        remote_storage:
          etag: 08f2fd9d8fc18d92031001
          version_id: '1768478854315762'
  train:
    cmd: python -m trashsorting.train
    deps:
    - path: data/processed/trashnet.pt
      hash: md5
      md5: 8efe31e3a4096804e2b49fb0b445d549
      size: 3043116382
    - path: src/trashsorting/model.py
      hash: md5
      md5: cc64be8c2b3ec716df83c7643725a92f
      size: 2256
    - path: src/trashsorting/train.py
      hash: md5
      md5: 2d3f3b7c2378097eb2f4182550e45488
      size: 2202
    params:
      params.yaml:
        data.fraction: 1.0
        data.seed: 42
        train.batch_size: 32
        train.learning_rate: 0.001
        train.max_epochs: 10
        train.model_name: mobilenetv3_small_100
        train.num_workers: 0
        train.optimizer: adam
        train.use_wandb_logger: false
    outs:
    - path: models/model.ckpt
      hash: md5
      md5: 04a958ff6bba31bb7e0a56d097c498cf
      size: 18541300
      cloud:
        remote_storage:
          etag: 08d681b1f1c08d92031001
          version_id: '1768478791712982'
  evaluate:
    cmd: python -m trashsorting.evaluate
    deps:
    - path: data/processed/trashnet.pt
      hash: md5
      md5: 8efe31e3a4096804e2b49fb0b445d549
      size: 3043116382
    - path: models/model.ckpt
      hash: md5
      md5: 04a958ff6bba31bb7e0a56d097c498cf
      size: 18541300
    - path: src/trashsorting/evaluate.py
      hash: md5
      md5: fcab72a6ddab60ecf1d7635b2c28fc8a
      size: 3090
    - path: src/trashsorting/model.py
      hash: md5
      md5: cc64be8c2b3ec716df83c7643725a92f
      size: 2256
    params:
      params.yaml:
        data.fraction: 1.0
        evaluate.batch_size: 32
        evaluate.checkpoint_path: models/model.ckpt
        evaluate.num_workers: 0
    outs:
    - path: reports/eval_metrics.json
      hash: md5
      md5: 7c2efbe434a1658ebe277e2c43f93798
      size: 70
